<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Προφίλ Χρήστη</title>
  <link rel="stylesheet" type="text/css" href="css/profile.css" />
</head>

<body>
  <!-- Top Navigation Bar -->
  <header>
    <nav>
        <ul class="menu">
            <li><a href="#" onclick="openSettingsModal();">Ρυθμίσεις</a></li>
            <!--<li><a href="#">Export</a></li>-->
            <li><a onclick="openUserGuideModal();" href="#">Οδηγίες Χρήσης</a></li>
        </ul>
        <!-- Placeholder for User's Name in the Center -->
        <div class="user-name">
            <span id="usernameHeader"></span> <!-- Placeholder for the user's first and last name -->
        </div>
        <!-- Log Out Button -->
        <div class="logout-button" onclick="logout();">
            <a href="#">Αποσύνδεση</a>
        </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
      <section class="profile-section">
          <!-- Profile Picture -->
          <div class="profile-picture">
              <img src="./images/profile_default.png" alt="User Profile Picture">
              <button id="pfp-edit-btn" onclick="openPfpModal()">Αλλαγή</button>
          </div>
          <!-- Button Container -->
          <div class="button-container">
              <!-- "Take Questionnaire" Button -->
              <div class="take-questionnaire">
                  <button id="openQuestionnaireBtn">Συμπλήρωση Ερωτηματολογίου</button>
              </div>
              <!-- "Edit Information" Button -->
              <div class="edit-information">
                  <button id="editInformationBtn">¨Λειτουργία Τροποποίησης</button>
              </div>
          </div>
      </section>

      <!-- User Memories and Information -->
      <section class="user-info">
          <div class="memory-container" id="memory-container">
              <!-- Divs generated by JavaScript -->
          </div>
      </section>
  </main>

  <!--MODALS-->
  <div id="questionnaireModal" class="questionnaireModal">
    <div class="questionnaireModal-content">
      <span id="closeQModal" class="closeQuestionnaire">&times;</span> <!-- X close button -->
      <div id="questionsContainer"></div> <!-- Dynamic Questions -->
      <button id="questionnaireModal-saveButton">Αποθήκευση</button> <!-- Full-width Save Button -->
    </div>
  </div>

  <div id="editingModal" class="editingModal">
    <div class="editingModal-content">
        <span id="editingModal-closeBtn" class="editingModal-closeBtn">&times;</span>
        <h2 id="editingModal-header"></h2>
        <textarea type="text" id="editingModal-input"></textarea><br>
        <button id="editingModal-saveBtn">Αποθήκευση</button>
    </div>
</div>

<div id="settingsModal" class="settingsModal">
  <div class="settingsModal-content">
    <span id="settingsModal-closeBtn" class="settingsModal-closeBtn">&times;</span>
    <h2 id="settingsModal-header"></h2>
    <label style="font-weight: bolder;" class="settingsModal-label" for="settingsModal-email">Αλλαγή email:</label><br>
    <input type="email" placeholder="Your new email" class="settingsModal-input" id="settingsModal-email"><br>
    <span style="font-size: small;" id="currentEmail"></span><br><br>
    <label style="font-weight: bolder;" class="settingsModal-label" for="settingsModal-password">Αλλαγή password:</label><br>
    <input type="password" placeholder="Your old password" class="settingsModal-input" id="settingsModal-oldPassword"><br>
    <input type="password" placeholder="Your new password" class="settingsModal-input" id="settingsModal-newPassword"><br><br>
    
    <br><span style="font-size: small;" id="handleSpan"></span><br>
    <form>
        <input type="radio" id="radio_private" name="visibility" value="private"> Ιδιωτικός
        <input type="radio" id="radio_visible" name="visibility" value="visible"> Δημόσιος
    </form><br>
    
    <button onclick="saveSettings()" id="settingsModal-saveBtn">Αποθήκευση & Αποσύνδεση</button>
  </div>
</div>

<div id="initModal" class="initModal">
  <div class="initModal-content">
    
    <h2 id="initModal-header">Καλωσόρισατε στο Memoralife</h2><br>
    <h3 id="initModal-subheader">Δεδομένου ότι είναι η πρώτη φορά που συνδέεστε, θα χρειαστεί να απαντήσετε σε μερικές ερωτήσεις. Μπορείτε να κλείσετε το ερωτηματολόγιο και να το ανοίξετε ξανά αργότερα κάνοντας κλικ στο κουμπί "Ερωτηματολόγιο". Ένας πιο περιεκτικός οδηγός είναι διαθέσιμος στο επάνω αριστερό μέρος αυτής της σελίδας, ανοίξτε τον κάνοντας κλικ στο "User Guide".</h3><br>

    <button onclick="initBtn()" id="initModal-Btn">Ερωτηματολόγιο</button>
  </div>
</div>

<!-- Full text modal -->
<div id="fullTextModal" class="fullTextModal">
  <div class="fullTextModal-content">
    <p id="fullTextModal-text"></p>
    <span id="fullTextModal-closeBtn">&times;</span>
  </div>
</div>

<!-- Video guide modal -->
<div id="videoGuideModal" class="videoGuideModal">
  <div class="videoGuideModal-content">
    <video id="videoGuide" width="1000" height="700" controls>
      <source src="./assets/memoralife_videoGuide.mp4" type="video/mp4">
    </video>
    <span id="videoGuideModal-closeBtn">&times;</span>
  </div>
</div>

  <!--SCRIPTS-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src = "https://cdn.socket.io/socket.io-3.0.5.js"></script>
    <script type="text/javascript" src="js/jscode_profile.js"></script>
    <!--firebase-->

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCMwkKpoxfdFmcVq6T700g3fBGU8HyOGwM",
          authDomain: "memoralife-f6489.firebaseapp.com",
          projectId: "memoralife-f6489",
          storageBucket: "memoralife-f6489.appspot.com",
          messagingSenderId: "582575223717",
          appId: "1:582575223717:web:290af80346fbbf437c2e4c",
          measurementId: "G-KBW4V91T2F"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      </script>

    <!--end firebase-->

</body>

</html>